# 视频模型使用指南

## 概述

本指南详细介绍如何使用 `Qwen/Qwen2.5-VL-72B-Instruct` 和 `Pro/Qwen/Qwen2.5-VL-7B-Instruct` 两个模型进行视频内容分析。

## 支持的模型

### 1. Qwen/Qwen2.5-VL-72B-Instruct
- **特点**：最高质量视觉理解
- **适用场景**：高质量视频分析，小批量处理
- **优势**：准确性最高，分析结果最详细
- **劣势**：响应速度较慢，成本较高

### 2. Pro/Qwen/Qwen2.5-VL-7B-Instruct
- **特点**：快速响应
- **适用场景**：大批量处理，快速分析
- **优势**：响应速度快，成本较低
- **劣势**：分析结果相对简单

## 安装和配置

### 1. 获取API密钥
1. 访问 [硅基流动官网](https://www.siliconflow.cn/)
2. 注册账号并登录
3. 在控制台获取API密钥
4. 确保账户有足够的余额

### 2. 测试模型可用性
```bash
node examples/test-video-models.js <您的API密钥>
```

这个命令会测试两个模型是否可用，并显示测试结果。

## 使用方法

### 基础用法

```bash
# 使用默认模型（Qwen/Qwen2.5-VL-72B-Instruct）
node examples/video-content-analyzer.js examples/downloads <您的API密钥>

# 使用指定模型
node examples/video-content-analyzer.js examples/downloads <您的API密钥> Qwen/Qwen2.5-VL-72B-Instruct
node examples/video-content-analyzer.js examples/downloads <您的API密钥> Pro/Qwen/Qwen2.5-VL-7B-Instruct
```

### 高级用法

```bash
# 指定输出文件
node examples/video-content-analyzer.js examples/downloads <您的API密钥> Pro/Qwen/Qwen2.5-VL-7B-Instruct output.csv

# 使用高质量模型并指定输出
node examples/video-content-analyzer.js examples/downloads <您的API密钥> Qwen/Qwen2.5-VL-72B-Instruct high_quality_analysis.csv
```

## 模型选择建议

### 选择 Qwen/Qwen2.5-VL-72B-Instruct 的情况：
- 需要最高质量的分析结果
- 处理少量重要视频
- 对分析准确性要求极高
- 预算充足

### 选择 Pro/Qwen/Qwen2.5-VL-7B-Instruct 的情况：
- 需要快速处理大量视频
- 对分析速度要求较高
- 预算有限
- 基础分析需求

## 分析结果对比

### 72B模型分析结果示例：
```json
{
  "visualElements": ["明亮的自然光线", "清晰的4K画质", "专业的构图"],
  "actions": ["流畅的舞蹈动作", "精确的手势表达", "自然的身体语言"],
  "scenes": ["现代化的室内环境", "简洁的背景设计", "专业的拍摄角度"],
  "people": ["年轻女性主角", "自信的表情", "时尚的服装搭配"],
  "objects": ["智能手机", "时尚配饰", "专业摄影设备"],
  "topic": "舞蹈",
  "topicConfidence": 0.98,
  "sentiment": "positive",
  "sentimentScore": 0.92,
  "keywords": ["舞蹈", "时尚", "自信", "年轻", "活力"],
  "summary": "一位年轻女性在现代化环境中展示流畅的舞蹈动作，画面清晰，充满活力。",
  "contentSummary": "充满活力的舞蹈视频，展现了年轻女性的自信和时尚魅力，画面质量高，动作流畅自然。",
  "language": "中文",
  "contentType": "entertainment",
  "targetAudience": ["年轻女性", "舞蹈爱好者", "时尚关注者"],
  "qualityScore": 0.95,
  "visualQuality": "high",
  "engagementPotential": "high"
}
```

### 7B模型分析结果示例：
```json
{
  "visualElements": ["明亮光线", "清晰画质"],
  "actions": ["舞蹈动作", "手势表达"],
  "scenes": ["室内环境", "简洁背景"],
  "people": ["年轻女性", "自信表情"],
  "objects": ["智能手机", "时尚配饰"],
  "topic": "舞蹈",
  "topicConfidence": 0.85,
  "sentiment": "positive",
  "sentimentScore": 0.78,
  "keywords": ["舞蹈", "时尚", "年轻"],
  "summary": "年轻女性展示舞蹈动作，画面清晰。",
  "contentSummary": "舞蹈视频，展现年轻女性的活力。",
  "language": "中文",
  "contentType": "entertainment",
  "targetAudience": ["年轻女性", "舞蹈爱好者"],
  "qualityScore": 0.82,
  "visualQuality": "medium",
  "engagementPotential": "medium"
}
```

## 性能对比

| 特性 | 72B模型 | 7B模型 |
|------|---------|--------|
| 分析准确性 | 极高 | 高 |
| 响应速度 | 慢（10-30秒） | 快（5-15秒） |
| 成本 | 高 | 低 |
| 分析深度 | 非常详细 | 基础详细 |
| 适用场景 | 高质量分析 | 大批量处理 |

## 常见问题

### Q: 如何选择最适合的模型？
A: 根据您的需求选择：
- 如果追求最高质量，选择72B模型
- 如果需要快速处理大量视频，选择7B模型

### Q: 两个模型的分析结果差异大吗？
A: 72B模型会提供更详细和准确的分析，而7B模型提供基础但有效的分析。

### Q: 可以同时使用两个模型吗？
A: 可以分别运行两次分析，然后对比结果。

### Q: 模型分析失败怎么办？
A: 检查API密钥是否正确，账户余额是否充足，网络连接是否正常。

### Q: 遇到 "Json mode is not supported for this model" 错误怎么办？
A: 这个错误已经修复。新版本移除了 `response_format: { type: 'json_object' }` 参数，现在支持所有模型。如果仍有问题，请运行测试脚本：
```bash
node examples/test-model-fix.js <您的API密钥>
```

### Q: 模型返回的不是JSON格式怎么办？
A: 程序会自动处理这种情况：
1. 首先尝试解析JSON格式
2. 如果失败，会尝试从文本中提取JSON部分
3. 如果仍然失败，会使用文本响应的前200个字符作为摘要

## 最佳实践

### 1. 测试阶段
- 先用7B模型测试小批量视频
- 确认分析效果后再使用72B模型进行高质量分析

### 2. 批量处理
- 大批量处理建议使用7B模型
- 重要视频单独使用72B模型分析

### 3. 成本控制
- 监控API使用量和费用
- 根据预算选择合适的模型

### 4. 结果处理
- 保存分析结果用于后续研究
- 对比不同模型的分析结果

## 技术支持

如果遇到问题，请：
1. 检查API密钥和网络连接
2. 查看控制台错误信息
3. 参考项目README文档
4. 在GitHub提交Issue 